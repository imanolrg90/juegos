<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Musical | Sala de Juegos</title>
    <!-- Fuentes -->
       <link rel="icon" type="image/png" href="/assets/favicon.png">
    <link rel="apple-touch-icon" href="/assets/favicon.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="bingo.css">
    
    
</head>
<body>

    <div class="container">
        
        <!-- PANEL IZQUIERDO: CONTROLES -->
        <aside class="panel left-panel">
            <h1 class="header-title">üé± Bingo Musical</h1>

            <!-- Tarjeta "Ahora Sonando" -->
            <div class="now-playing-card" id="nowPlayingCard">
                <div class="vinyl-record">
                    <span style="font-size: 30px;">üéµ</span>
                </div>
                
                <p id="currentNumber" class="number-display">--</p>
                <p id="currentSong" class="song-name">Presiona "Generar Nuevo Bingo"</p>

                <div id="sidebarAudioContainer">
    <audio id="audioPlayer" style="display:none;">
        Tu navegador no soporta audio.
    </audio>

    <div class="custom-player-ui">
        
        <div>
            <input type="range" id="seekSlider" value="0" max="100">
            <div class="time-display">
                <span id="currentTime">0:00</span>
                <span id="duration">0:00</span>
            </div>
        </div>

        <div class="player-controls-row">
            <button id="pBtnRw" class="player-btn" title="-10 seg">‚è™</button>
            <button id="pBtnPlay" class="player-btn big" title="Play/Pause">‚ñ∂Ô∏è</button>
            <button id="pBtnFw" class="player-btn" title="+10 seg">‚è©</button>
        </div>

        <div class="volume-row">
            <span>üîà</span>
            <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="1">
            <span>üîä</span>
        </div>
    </div>
</div>
            </div>

            <!-- Controles -->
            <div class="controls-grid">
                <select id="categorySelect" class="category-select">
                    <option value="all">üìÅ Todas las Categor√≠as</option>
                </select>

                <button id="newGameBtn" class="btn btn-primary">
                    üé≤ Nuevo Bingo
                </button>
                
                <button id="nextSongBtn" class="btn btn-success" disabled>
                    ‚è≠Ô∏è Siguiente Canci√≥n
                </button>
                
                <div style="display: flex; gap: 10px;">
                    <button id="manualBtn" class="btn btn-manual" style="flex: 1;">
                        üñê Manual
                    </button>
                    <button id="songsListBtn" class="btn btn-outline" style="flex: 1;">
                        üìã Lista
                    </button>
                </div>

                <a href="../index.html" class="btn btn-outline" style="margin-top: 10px;">
                    üè† Volver al Hub
                </a>
            </div>

            <!-- Stats -->
            <div class="stats-bar">
                <p class="stats-text">Progreso: <span id="songsPlayed" class="stats-val">0</span> / 90</p>
                <p class="stats-text"><span id="gameStatus">Esperando...</span></p>
            </div>
        </aside>

        <!-- PANEL DERECHO: TABLERO -->
        <main class="panel right-panel">
            <h2>Tablero de N√∫meros</h2>
            <div class="bingo-grid" id="bingoGrid">
                <!-- Se genera con JS -->
            </div>
        </main>

    </div>

    <!-- MODAL: LISTA DE CANCIONES -->
    <div id="songsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Historial de Canciones</h3>
                <span class="close" id="closeListModal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="songsList" class="songs-list"></div>
            </div>
        </div>
    </div>

    <!-- MODAL: ADIVINANZA / JUEGO -->
    <div id="guessModal" class="modal">
        <div class="modal-content guess-content">
            <!-- BOT√ìN DE CERRAR MANUAL POR SI SE CUELGA -->
            <span class="close" onclick="document.getElementById('guessModal').style.display='none'" style="position:absolute; right:15px; top:10px;">&times;</span>
            
            <div class="modal-body">
                
                <!-- PASO 1: CUENTA ATR√ÅS Y AUDIO -->
                <div id="guessStep1">
                    <div id="sponsorContainer" style="display: none; margin-bottom: 20px;">
                        <p style="text-transform: uppercase; font-size: 0.8rem; letter-spacing: 2px; color: #aaa;">‚ú® Patrocinado por:</p>
                        <img id="sponsorImg" class="sponsor-img" src="" alt="Logo Patrocinador">
                        <h3 id="sponsorName" style="color: white;">Nombre Patrocinador</h3>
                    </div>
                    
                    <div id="countdownDisplay" style="font-size: 5rem; font-weight: 900; color: var(--warning); display:none;">3</div>
                    
                    <div id="gameContent">
                        <!-- Animaci√≥n de barras de sonido simuladas -->
                        <div style="display: flex; justify-content: center; gap: 5px; height: 50px; align-items: flex-end; margin-bottom: 20px;">
                            <div style="width:8px; height:20px; background:var(--primary); animation: bounce 0.5s infinite;"></div>
                            <div style="width:8px; height:40px; background:var(--accent); animation: bounce 0.6s infinite;"></div>
                            <div style="width:8px; height:30px; background:var(--success); animation: bounce 0.4s infinite;"></div>
                            <div style="width:8px; height:50px; background:var(--primary); animation: bounce 0.7s infinite;"></div>
                            <div style="width:8px; height:25px; background:var(--accent); animation: bounce 0.5s infinite;"></div>
                        </div>
                        <style>@keyframes bounce { 0%, 100% {transform: scaleY(0.5);} 50% {transform: scaleY(1);} }</style>

                        <div id="modalAudioContainer" style="width: 100%; margin-bottom: 20px;"></div>

                        <h2 style="margin-bottom: 10px;">üéß ¬°ESCUCHA!</h2>
                        <p style="color: #aaa; margin-bottom: 20px;">¬øQu√© canci√≥n es?</p>
                        
                        <button id="revealResultBtn" class="btn btn-primary" style="width: 100%;">
                            üëÄ Mostrar Resultado
                        </button>
                    </div>
                </div>

                <!-- PASO 2: RESULTADO -->
                <div id="guessStep2" style="display: none;">
                    <h3 style="color: var(--text-muted); text-transform: uppercase; letter-spacing: 2px;">¬°Es el n√∫mero!</h3>
                    
                    <div id="modalBigNumber" class="big-result-number">#</div>
                    
                    <h2 id="modalBigTitle" class="big-result-title">T√≠tulo Canci√≥n</h2>
                    <h3 id="modalBigArtist" style="font-weight: 300; font-size: 1.2rem; color: #ccc;">Artista</h3>
                    
                    <button id="confirmResultBtn" class="btn btn-success" style="width: 100%; margin-top: 25px;">
                        ‚úÖ Marcar en Tablero
                    </button>
                </div>

            </div>
        </div>
    </div>

    <!-- SCRIPTS MANTENIDOS -->
    <script src="../js/songs.js"></script>
    <script src="app.js"></script>

    <!-- Peque√±o script para la animaci√≥n del vinilo -->
    <script>
        const audio = document.getElementById('audioPlayer');
        const card = document.getElementById('nowPlayingCard');
        
        audio.onplay = () => card.classList.add('playing');
        audio.onpause = () => card.classList.remove('playing');
        audio.onended = () => card.classList.remove('playing');
    </script>
</body>
</html>